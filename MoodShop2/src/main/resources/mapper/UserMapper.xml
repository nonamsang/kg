<?xml version="1.0" encoding="UTF-8"?> 

<!DOCTYPE mapper  
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="com.moodshop.kokone.dao.UserDAO">

		<select id="getAllUser" resultType="UserVO">
			SELECT user_id, password, name, address, nickname, tel
			FROM USER_TBL
			ORDER BY user_id ASC
		</select>

		<select id="getUserVO" parameterType="UserVO" resultType="UserVO">
			SELECT user_id, password, name, address, nickname, tel
			FROM USER_TBL
			WHERE user_id = #{user_id, jdbcType=VARCHAR}
		</select>
		
		<select id="checkUserId" parameterType="String" resultType="int">
			SELECT COUNT(*)
			FROM USER_TBL
			WHERE user_id = #{user_id} 
		</select>
		<select id="checkUserNick" parameterType="String" resultType="int">
			SELECT COUNT(*)
			FROM USER_TBL
			WHERE nickname = #{nickname} 
		</select>
		<select id="insertUser" parameterType="UserVO">
			INSERT INTO USER_TBL
			(user_id, password, name, address, nickname, tel)
			VALUES (#{user_id}, #{password}, #{name}, #{address}, #{nickname}, #{tel})
		</select>
		<select id="findUserId" resultType="UserVO">
			SELECT *
			FROM USER_TBL
			WHERE name=#{name} AND tel=#{tel}
		</select>
		<select id="findUserPw" resultType="UserVO">
			SELECT *
			FROM USER_TBL
			WHERE name=#{name} AND tel=#{tel} AND user_id=#{user_id}
		</select>
		<update id="updateUserPw">
			UPDATE USER_TBL
			SET password = #{newPassword}
			WHERE user_id = #{user_id}
		</update>
		
		    <!-- 회원 정보 수정 쿼리 -->
    <update id="updateUser" parameterType="com.moodshop.kokone.vo.UserVO">
        UPDATE USER_TBL
        SET password = #{password},
            name = #{name},
            address = #{address},
            nickname = #{nickname},
            tel = #{tel}
        WHERE user_id = #{user_id}
    </update>
    
    <!-- 회원 정보 삭제 쿼리 -->
    <delete id="deleteUser" parameterType="String">
    DELETE FROM USER_TBL
    WHERE user_id = #{user_id}
	</delete>
	<!-- 아래 김동주가 추가한 것 -->
<select id="getUserInfoByUserId" resultType="UserVO">
	SELECT NAME, ADDRESS
	FROM USER_TBL
	WHERE user_id=#{user_id}
</select>
	</mapper>
<!-- <mapper namespace="com.moodshop.kokone.dao.ManagerDAO">
		<select id="getManagerVO" parameterType="ManagerVO" resultType="ManagerVO">
			SELECT manager_id, password, name, nickname, tel
			From MANAGER
			WHERE manager_id = #{manager_id}
		</select>
	</mapper>  -->