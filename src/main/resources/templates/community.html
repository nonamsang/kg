<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title>커뮤니티</title>
	<!--<link rel="stylesheet" th:href="@{/css/community.css}" />-->
	<link rel="stylesheet" th:href="@{/css/style.css}" />
	<link rel="stylesheet" th:href="@{/css/community.css(v=${#dates.createNow().time})}" / </head>

<body>
	<div th:replace="fragments/header :: header"></div>
	<img src="/image/로고.png" width="200" height="200" style="display:block; margin:0 auto;">
	<h1 align="center" style="color:yellowgreen;">리틀커뮤니티</h1>

	<!-- 글 작성 버튼 -->
	<div class="button-container">
		<select name="sort" id="idSelect">
			<option value="desc" th:selected="${sort=='desc'}">최신순</option>
			<option value="asc" th:selected="${sort=='asc'}">오래된순</option>
			<option value="likes" th:selected="${sort=='likes'}">인기순</option>
		</select>
		<label>
			<input type="checkbox" name="type" value="자유" th:checked="${type != null and type.contains('free')}">자유
		</label>
		<label>
			<input type="checkbox" name="type" value="정보공유" th:checked="${type != null and type.contains('share')}">정보공유
		</label>
		<label>
			<input type="checkbox" name="type" value="공지" th:checked="${type != null and type.contains('notice')}">공지
		</label><label>
			<input type="checkbox" name="my" id="my" value="mine" th:checked="${user_Id!=null}">내 글만 보기</label>
		<button class="button" id="insbtn">
			<img class="button_img" src="/image/등록이미지.png" alt="글등록">
		</button>
	</div>

	<div class="post-list">
		<div th:each="com, iterStat : ${com}" class="post-card">
			<!-- 이미지 영역 -->
			<div class="post-image">
				<img th:if="${com.photo != null and com.photo != ''}" th:src="${com.photo}" onclick="zimage(this)">
				<div th:if="${com.photo == null or com.photo == ''}" class="placeholder"></div>
			</div>

			<!-- 글 카드 오른쪽 텍스트 영역 -->
			<div class="post-text" onclick="status(this)">
				<h3 class="post-title">
					<span th:text="${iterStat.index+1}">순서</span> &#127811;
					<span th:text="${com.nickname}">사용자아이디</span>&nbsp;&nbsp;
					<input type="hidden" name="user_Id" class="user_Id" th:value="${com.user_Id}">
					<span class=post-type th:text="${com.type}"
						style="font-size:10px; color:rgb(128, 128, 255)">타입</span><br>
					<span class=post-tytle th:text="${com.title}">제목</span>
				</h3>
				<p class="post-content" th:text="${com.content}">내용</p>
				<input type="hidden" name="id" class="community_Id" th:value="${com.id}">
				<input type="hidden" name="user_Id" class="user_Id" th:value="${user.Id}">
				<span class="post-date" th:text="${#dates.format(com.created_At,'yyyy-MM-dd HH:mm')}">날짜</span>
			</div>

			<!-- 좋아요 영역 (팝업과 무관하게 클릭 가능) -->
			<div class="post-like">
				<span class="like-btn" th:classappend="${check.contains(com.id)} ? ' liked'">
					<svg class="heart" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
						<path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
			             2 5.42 4.42 3 7.5 3
			             9.24 3 10.91 3.81 12 5.09
			             13.09 3.81 14.76 3 16.5 3
			             19.58 3 22 5.42 22 8.5
			             c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
					</svg>
				</span>
				<span class="likes-count" th:text="${com.likes}">0</span>
			</div>

			<!-- 수정/삭제 버튼 -->
			<button th:if="${com.user_Id==user.id}" class="upbtn1">수정하기</button>
			<button th:if="${com.user_Id==user.id} or ${user.role=='admin'}" class="debtn1">삭제하기</button>
		</div>
	</div>
	<div align="center">
		<button class=button id="usebutton">이용안내</button>
		<button class=button id="personnalbutton">개인정보처리방침</button>
	</div>


	<!-- 선택한 팝업 -->
	<div id="selectpopup" class="popup">
		<div class="post-popup">
			<span class="close" onclick="closer()">&times;</span>
			<h3><label id="s2title"></label></h3>
			<label id="s2nickname"></label>&nbsp;&nbsp;&nbsp; <label id="s2type"></label>
			<p style="font-size:15px;" id="s2content"></p>
			<div id="s2likes"></div>
			<span id="s2date"></span>
			<hr>
			<div id="subcomment">

			</div>
		</div>
	</div>

	<!-- 이미지 확대 팝업 -->
	<div id="imagepopup">
		<span class="close">&times;</span>
		<img id="imageup" src="">
	</div>
	</div>
	<!-- 글 등록 팝업 -->
	<div id="insertpopup" class="popup">
		<div class="post-popup">
			<span class="close">&times;</span>
			사용자 아이디 : <label name="user_Id" id="cuser_Id" th:text="${user.id}">0</label><br>
			타입 :
			<select id="ctype" name="type">
				<option value="">--선택--</option>
				<option value="공지">공지</option>
				<option value="자유">자유</option>
				<option value="정보공유">정보공유</option>
			</select><br>
			제목 : <input type="text" id="ctitle" name="title" required maxlength="20"
				placeholder="제목을 1자 이상 20자 이하로 입력해주세요"><br>
			<textarea name="content" id="ccontent" rows="10" cols="50" required maxlength="1000" minlength="10"
				placeholder="최소 10자 이상 입력해주세요"></textarea><br>
			사진(선택) <input type="file" name="photo" id="cphoto"><br>
			<button class="button" id="cinsbtn">글 등록</button>
		</div>
	</div>

	<!-- 글 수정 팝업 -->
	<div id="updatepopup" class="popup">
		<div class="post-popup">
			<span class="close">&times;</span>
			사용자 아이디 : <label name="user_Id" id="uuser_Id" th:text="${user.id}">0</label><br>
			타입 :
			<select id="utype" name="type">
				<option value="">--선택--</option>
				<option value="공지">공지</option>
				<option value="자유">자유</option>
				<option value="정보공유">정보공유</option>
			</select><br>
			제목 : <input type="text" id="utitle" name="title" maxlength="20" minlength="1"><br>
			<textarea name="content" id="ucontent" rows="10" cols="50" required maxlength="1000"
				minlength="10"></textarea><br>
			사진(선택) <input type="file" name="photo" id="uphoto"><br>
			<img id="uphotopath" width="100" height="100" style="display:none;">
			<button class="button" id="cupdbtn">글 수정</button>
			<button type="reset" id="cupdbtnre">초기화</button>
		</div>
	</div>
	<div id="usepopup" class="popup">
		<div class="post-popup">
			<span class="close">&times;</span>
			<h1 align="center">커뮤니티 사용 안내서</h1>
			<h4 align="center" style="color:black">
				안녕하세요, 그린 핀테크 커뮤니티에 오신 것을 환영합니다.<br>
				이곳은 작은 씨앗을 심어 나무로 키우듯, 서로의 생각을 나누고 성장하는 공간입니다.<br>
				여러분이 이곳에서 편안하게 활동하실 수 있도록 기본적인 안내와 규칙을 알려드립니다.<br>
				커뮤니티는 환경과 금융을 아우르는 지식을 나누고, 작은 실천으로 큰 변화를 만들어 가며,<br>
				서로에게 긍정적인 영향을 주는 네트워크를 형성하는 것을 목표로 합니다.<br>
				글쓰기와 댓글은 자유롭게 작성할 수 있습니다.<br>
				일상 속 작은 실천 이야기, 금융과 환경에 대한 아이디어, <br>나무 키우기 인증 등 다양한 주제를 환영합니다.<br>
				다만, 서로 다른 의견도 존중하며, 상대방을 배려하는 언어를 사용해 주시기 바랍니다.<br>
				댓글은 대화의 시작점이며, 짧은 공감 한 마디도 충분히 가치가 있습니다.<br>

				광고, 스팸, 욕설, 혐오 발언은 허용되지 않습니다.<br>
				허위 정보나 타인의 권리를 침해하는 글은 삭제될 수 있으며, <br>같은 주제의 글은 하나로 정리하는 것을 권장합니다.</h4>
		</div>
	</div>
	<div id="perpopup" class="popup">
		<div class="post-popup">
			<span class="close">&times;</span>
			<h1 align="center">개인정보 처리방침</h1>
			<h4 align="center" style="color:black">
				리틀포레스트 커뮤니티는 「개인정보보호법」을 준수하며, 회원님의 개인정보를 안전하게 관리합니다. <br>
				개인정보는 명시된 수집 목적 범위 내에서만 이용되며, <br>
				법령에서 정한 경우를 제외하고는 회원님의 동의 없이 제3자에게 제공되지 않습니다. <br>
				또한 보유 기간이 지난 개인정보는 안전하게 파기합니다. <br>
				회원님은 언제든지 자신의 개인정보와 관련하여 열람, 정정, 삭제, 처리정지 요구, <br>
				그리고 회원 탈퇴를 통해 계정 삭제와 개인정보 파기를 요청할 수 있는 권리를 가집니다.</h4>
		</div>
	</div>

	<script src="/js/option.js"></script>
	<script src="/js/select.js"></script>
	<script src="/js/insert.js"></script>
	<script src="/js/update.js"></script>
	<!--<script src="/js/my.js"></script>-->
	<script src="/js/likey.js"></script>
	<script src="/js/usebutton.js"></script>
	<div th:replace="fragments/footer :: footer"></div>
</body>

</html>