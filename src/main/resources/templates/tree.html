<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Little Forest</title>
	<link rel="stylesheet" th:href="@{/css/tree.css}" />
	<link rel="stylesheet" th:href="@{/css/levelbar.css}" />
	<link rel="stylesheet" th:href="@{/css/mainpagestyle.css}" />
	<link rel="stylesheet" th:href="@{/css/attendance.css}">

	<!-- FullCalendar (attendance μ „μ©) -->
	<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/locales-all.global.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>

<body class="tree-page">

	<input type="hidden" id="id" name="id" th:value="${users.id}" />

	<!-- νμ΄μ§€ μƒλ‹¨ μ λ© -->
	<h1 class="page-title">
		μλΌλ‚λΌ λ‚λ¬΄λ‚λ¬΄ !!
	</h1>
	<!-- ν–‡μ‚΄ & κµ¬λ¦„ -->
	<div class="sun"></div>

	<!-- λ‹¤μ΄λ°›μ€ κµ¬λ¦„ μ΄λ―Έμ§€ -->
	<img src="/image/cloud2.png" class="cloud cloud1" alt="κµ¬λ¦„1">
	<img src="/image/cloud2.png" class="cloud cloud2" alt="κµ¬λ¦„2">
	<img src="/image/cloud2.png" class="cloud cloud3" alt="κµ¬λ¦„3">

	<main class="tree-content">

		<div class="side-buttons">
			<button class="button" onclick="openAttendanceModal()">
				<img src="/image/check.png" alt="μ¶μ„ μ•„μ΄μ½" class="btn-icon"> μ¶μ„ μ²΄ν¬
			</button>

			<button class="button" onclick="openInfoModal()">
				<img src="/image/notice.png" alt="μ•λ‚΄μ‚¬ν•­ μ•„μ΄μ½" class="btn-icon"> μ΄μ© μ•λ‚΄
			</button>
			<button class="button" id="community">
				<img src="/image/antenna.png" alt="μ»¤λ®¤λ‹ν‹° μ•„μ΄μ½" class="btn-icon"> μ»¤λ®¤λ‹ν‹°
			</button>
			<button class="button" id="historyBtn">
				<img src="/image/treeicon.png" alt="λ‚λ¬΄μΌμ§€ μ•„μ΄μ½" class="btn-icon"> λ‚μ λ‚λ¬΄ μΌμ§€
			</button>
			<div th:if="${iftree}">
				<button class="button" id="buy">
					<img src="/image/biryo.png" alt="λΉ„λ£κµ¬λ§¤ μ•„μ΄μ½" class="btn-icon"> λΉ„λ£ κµ¬λ§¤
				</button>
			</div>
			<div th:if="${iftree}">
				<button class="button" id="water">
					<img src="/image/water.png" alt="λ¬Ό λ°›κΈ° μ•„μ΄μ½" class="btn-icon">
					λ¬Ό λ°›κΈ°<br><span id="giver">0</span><br><span id="timewatch">νƒ€μ΄λ¨Έ</span>
				</button>
			</div>
			<div th:if="${iftree}">
				<button class="button" onclick="location.href='/'">
					<img src="/image/home.png" alt="ν™μΌλ΅ κ°€κΈ° μ•„μ΄μ½" class="btn-icon">
					<span id="home">ν™μΌλ΅ κ°€κΈ°</span>
				</button>
			</div>
		</div>

		<div class="tree-container">
			<div th:if="${iftree}">
				<div class="tree_location">
					<div class="waterjson" id="waterjson" style="display:none">
						<lottie-player src="/json/Watering.json" background="transparent" speed="2"
							style="width:100%; height:100%;" loop autoplay></lottie-player>
					</div>
					<!--<img class="tree_img" id="tree_img" th:src="@{${tree_Image}}">

					<div class="speech-bubble">λ‚ μ¤λλ„ μ‘¥μ‘¥~ π±</div>-->

					<div class="speech-bubble">λ‚ μ¤λλ„ μ‘¥μ‘¥~ π±</div>
					<div class="image_wrap">
						<div id="son7">
							<img class="tree_img" id="tree_img" th:src="@{${tree_Image}}">
						</div>
						<div class="meadow">

						</div>
					</div>

					<div id="soil-container"
						style="position:absolute; width:100px; height:400px; bottom:30%; overflow:hidden; pointer-events:none; background:transparent; display:none;">
						<img class="soil" src="/image/λΉ„λ£.png">
					</div>
				</div>

				<div class="tree-details">
					<div id="son77">
						<p>
							λ λ²¨ <span id="tree_Level" th:text="${stock.tree_Level}">0</span>
						</p>
					</div>
					<div class="bamboo-bar" id="bambooBar">κ²½ν—μΉ</div>
				</div>

				<p class="tree-name">λ‚λ¬΄μ΄λ¦„ : <span th:text="${stock.tree_Name}">λ‚λ¬΄</span></p>
				<input type="hidden" id="water_Count" name="water_Count" th:value="${stock.water_Count}">
			</div>

			<div th:unless="${iftree}">
				<div class="tree-image-placeholder" id="wantseed">μ”¨μ•—μ„ μ‹¬μ–΄μ£Όμ„Έμ”</div>
				<div class="center-bottom-button">
					<button class="button" id="seed">μ”¨μ•— μ‹¬κΈ°</button>
				</div>
			</div>
		</div>

		<div class="bottom-right-buttons" th:if="${iftree}">
			<button class="button fertilizer-btn" id="biyrobtn">
				<img src="/image/givebiryo.png" alt="λΉ„λ£ μ•„μ΄μ½" class="btn-icon">
				<div class="btn-text">
					<input type="hidden" id="biyro_Used_At" name="biyro_Used_At"
						th:value="${#dates.format(stock.biyro_Used_At,'yyyy-MM-dd HH:mm:ss')}">
					<div id="biyrotimer">νƒ€μ΄λ¨Έ</div>
					λ³΄μ  λΉ„λ£ : <span id="biyro_Stock" th:text="${stock.biyro_Stock}">0</span><br> λΉ„λ£ μ£ΌκΈ°
				</div>
			</button>
			<button class="button" id="waterbtn">
				<img src="/image/givewater.png" alt="λ¬Ό μ•„μ΄μ½" class="btn-icon">
				<div class="btn-text">
					λ³΄μ  λ¬Ό: <span id="water_Stock" th:text="${stock.water_Stock}">0</span><br> λ¬Ό μ£ΌκΈ°
				</div>
			</button>
		</div>

		<!-- νμ—…μ°½ -->
		<div id="popupModal" class="modal" th:if="${iftree}">
			<div class="modal-content">
				<span class="close">&times;</span>
				<h2><span th:text="${users.nickname}">λ‹‰λ„¤μ„</span></h2>
				<p>
					λΉ„λ£ μ¬κ³  : <span id="biyroStockm" th:text="${stock.biyro_Stock}">0</span>
				</p>
				<p>
					λ³΄μ  ν¬μΈνΈ : <span id="point" th:text="${users.point}">0</span>
				</p>
				<div class="modal-content2">
					<p><img src="/image/λΉ„λ£.png" width="80px" height="100px"></p>
					κ°€κ²© :<span id="price">500</span>p<br>
					<div class="counter">
						<button id="minus" class="counter-btn">β’</button>
						<span id="soo" class="counter-value">1</span>
						<button id="plus" class="counter-btn">οΌ‹</button>
					</div>
				</div>
				<button class="button" id="purchase">κµ¬λ§¤</button>
			</div>
		</div>

		<!-- λ‚λ¬΄μ‹¬κΈ° νμ—…μ°½ -->
		<div id="popupseed" class="modalseed" th:unless="${iftree}">
			<div class="modal-content">
				<span class="close">&times;</span>
				<h1>ν‚¤μ°κ³  μ‹¶μ€ λ‚λ¬΄μ μ΄λ¦„μ„ μ μ–΄μ£Όμ„Έμ”</h1>
				<input type="text" name="tree_Name" id="tree_Name" required maxlength="5">
				<button class="button" id="treenaming">μ΄λ¦„ λ“±λ΅</button>
			</div>
		</div>

		<!-- μ΄μ©μ•λ‚΄ λ¨λ‹¬ -->
		<div id="infoModal" class="modal">
			<div class="modal-content">
				<span class="close" onclick="closeInfoModal()">&times;</span>
				<h3>μ΄μ© μ•λ‚΄</h3>
				<p>- μ¶μ„ μ²΄ν¬ μ‹ ν‰μΌ: λ¬Ό 1κ°, μ£Όλ§: λ¬Ό 2κ° μ§€κΈ‰</p>
				<p>- 10/20/30μΌ μ¶μ„λ§λ‹¤ λΉ„λ£ 1κ° μ§€κΈ‰</p>
				<p>- λ¬Ό β†’ μ„±μ¥λ¥  μ¦κ°€, λΉ„λ£ β†’ λ¬Ό μ¤„ λ• μ„±μ¥λ¥  2λ°°</p>
			</div>
		</div>

		<!-- λ λ²¨7 λ‹¬μ„±μ‹ νμ—…μ°½ -->
		<div id="congrulationpopup" class="modal2">
			<div class="modal-content">
				<span class="close">&times;</span>
				<p>μ¶•ν•ν•©λ‹λ‹¤. λ λ²¨ 7 λ‹¬μ„±!</p>
				<p>λ‚λ¬΄λ¥Ό λ‹¤μ‹ ν‚¤μ°μ‹κ² μµλ‹κΉ?</p>
				<button class="button" id="morebtn">λ‹¤μ‹ ν‚¤μ°κΈ°</button>
				<button class="button" id="nobtn">κ±°μ </button>
			</div>
		</div>

		<div id="son7_pose" class="modal2">
			<div class="modal-content">
				<span class="close">&times;</span>
				<p>λ‚λ¬΄ μ‚¬μ§„μ„ μ €μ¥ν•κ² μµλ‹κΉ?</p>
				<p>μ°κΈ° λ²„νΌμ„ λ„λ¥Όμ‹ μ¤ν¬λ¦°μƒ· λ―Έλ¦¬νμ΄μ§€ λ³΄κΈ°λ΅ μ΄λ™</p>
				<p>μ‚¬μ§„ μ°κΈ° κ±°λ¶€μ‹ λ‹¤μ‹ν‚¤μ°κΈ° ν™”λ©΄μΌλ΅ μ΄λ™</p>
				<button class="button" id="sontrue">μ°κΈ°</button>
				<button class="button" id="sonfalse">μ‚¬μ§„μ°κΈ° κ±°λ¶€</button>
			</div>
		</div>

		<!-- μ¤ν¬λ¦°μƒ· λ―Έλ¦¬λ³΄κΈ° μ°½-->
		<div id="beforeServer" class="modal2">
			<div class="modal-content5">
				<span class="close">&times;</span>
				<p align="center">μ‚¬μ§„μ΄ λ§μ— μ•λ“μ‹ λ‹¤λ©΄ &times;λ²„νΌμ„ λλ¬μ£Όμ„Έμ”.</p>
				<div id="preview"></div>
				<button class="button" id="goodBtn">μ‚¬μ§„ ν™•μ •</button>
			</div>
		</div>
		<!--λλ¤μ΄λ²¤νΈ νμ—…μ°½ -->
		<div id="randomeventpopup" th:if="${iftree}">
			<div class="modal-content">
				<span class="close">&times;</span>
				<h1 align="center"><span th:text="${users.nickname}">λ‹‰λ„¤μ„</span>λ‹!!</h1>
				<h1 align="center">ν‚¤μ°μ‹λ” λ‚λ¬΄μ— μ΅μ΄κ°€ μλΌλ‚¬μ–΄μ”! μ΅μ΄λ¥Ό μ κ±°ν•΄ μ£Όμ„Έμ”!</h1>
				<button type="button" id="adbtn">κ΄‘κ³ λ³΄κ³  μ΅μ΄μ κ±°</button>
				<button type="button" id="removebtn">100ν¬μΈνΈ μ“°κ³  μ΅μ΄μ κ±°</button><br>
				ν„μ¬ λ³΄μ  ν¬μΈνΈ : <span th:text="${users.point}" id="point0">λ‚¨μ€κΈμ•΅</span> P<br>
				<span style="font-size:15px; text-align:center">μ„ νƒ 1. κ΄‘κ³ λ¥Ό λ³΄κ³  μ΅μ΄λ¥Ό μ κ±°ν•λ‹¤ (ν¬μΈνΈ μ°¨κ° X)</span><br>
				<span style="font-size:15px; text-align:center">μ„ νƒ 2. 100ν¬μΈνΈλ¥Ό μ“°κ³  μ΅μ΄λ¥Ό μ κ±°ν•λ‹¤ (ν¬μΈνΈ μ°¨κ° O)</span>
			</div>
		</div>
		<div id="completepopup" class="modalcom" th:if="${iftree}">
			<div class="modal-content">
				<h1 align="center">μ΅μ΄μ κ±°μ— μ„±κ³µν•μ€μµλ‹λ‹¤</h1>
				<div id="pointHtml"></div>
				<button class="button" id="sucbtn">ν™•μΈ</button>
			</div>
		</div>
		<div id="purchasepopup" class="modalcom" th:if="${iftree}">
			<div class="modal-content">
				<h1 align="center">λΉ„λ£κµ¬λ§¤ μ„±κ³µν•μ€μµλ‹λ‹¤</h1>
				<div id="pointHtml2"></div>
				<button class="button" id="sucbtn2">ν™•μΈ</button>
			</div>
		</div>
		<div id="lessthenpopup" class="modalcom" th:if="${iftree}">
			<div class="modal-content">
				<h1 align="center">ν¬μΈνΈκ°€ λ¶€μ΅±ν•©λ‹λ‹¤</h1>
				<div id="pointHtml3"></div>
				<button class="button" id="sucbtn3">ν¬μΈνΈ μ¶©μ „ν•λ¬ κ°€κΈ°</button>
				<button class="button" id="sucbtn4">ν™•μΈ</button>
			</div>
		</div>
		<div id="stock0popup" class="modalcom" th:if="${iftree}">
			<div class="modal-content">
				<h1 align="center">λΉ„λ£ μ¬κ³  λ¶€μ΅±</h1>
				<div id="pointHtml4"></div>
				<button class="button" id="sucbtnb2">ν™•μΈ</button>
			</div>
		</div>
		<div id="stock0popupw" class="modalcom" th:if="${iftree}">
			<div class="modal-content">
				<h1 align="center">λ¬Ό μ¬κ³  λ¶€μ΅±</h1>
				<div id="pointHtml5"></div>
				<button class="button" id="sucbtnb5">ν™•μΈ</button>
			</div>
		</div>

		<div id="biyroLimitModal" class="modalcom" th:if="${iftree}" style="display:none;">
			<div class="modal-content">
				<h1 align="center">μ•„μ§ λΉ„λ£ μ¬μ‚¬μ© μ‹κ°„μ΄ λμ§€ μ•μ•μµλ‹λ‹¤.</h1>
				<button class="button" id="biyroLimitOk">ν™•μΈ</button>
			</div>
		</div>


		<div th:replace="~{fragments/attendance :: modal(user=${users})}"></div>

		<!-- μ¤ν¬λ¦½νΈ -->
		<script th:src="@{/js/attendance.js}"></script>
		<script src="/js/info.js"></script>
		<script src="/js/seed.js"></script>
		<!--<script src="/js/treesize.js"></script>-->
		<script src="/js/time.js"></script>
		<script src="/js/water.js"></script>
		<script src="/js/community.js"></script>
		<script src="/js/purchase.js"></script>
		<script src="/js/biyrousedat.js"></script>
		<script src="/js/randomevent.js"></script>
		<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
		<script src="/js/biyrojs.js"></script>
		<script src="/js/grownhistory.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/party-js@latest/dist/party.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

	</main>
</body>

</html>