<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
	<meta charset="UTF-8">
	<title th:text="${title} ?: '회원관리'"></title>

	<!--<meta name="_csrf" th:content="${_csrf.token}">
	<meta name="_csrf_header" th:content="${_csrf.headerName}">-->

	<meta name="_csrf" th:if="${_csrf != null}" th:content="${_csrf.token}">
	<meta name="_csrf_header" th:if="${_csrf != null}" th:content="${_csrf.headerName}">

	<input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">


	<link rel="stylesheet" th:href="@{/css/admin.css}">
</head>

<body th:replace="~{admin/layout :: layout(~{::section}, ~{::#page-scripts})}">
	<section>
		<h2>회원관리</h2>

		<form method="get" class="filter">
			<input type="text" name="keyword" th:value="${q.keyword}" placeholder="이름/이메일/닉네임/전화">
			<select name="role">
				<option value="">권한</option>
				<option value="user" th:selected="${q.role=='user'}">user</option>
				<option value="admin" th:selected="${q.role=='admin'}">admin</option>
			</select>
			<button type="submit">검색</button>
		</form>

		<div class="table-wrap">
			<table class="list">
				<thead>
					<tr>
						<th>ID</th>
						<th>이름</th>
						<th>닉네임</th>
						<th>이메일</th>
						<th>주소</th>
						<th>보유 포인트</th>
					</tr>
				</thead>

				<tbody>
					<tr th:each="m : ${res.rows}" th:data-id="${m['id']}" class="clickable"
						th:onclick="|location.href='@{/admin/members/{id}(id=${m['id']})}'|" style="cursor:pointer">
						<td th:text="${m['id']}"></td>
						<td th:text="${m['name']}"></td>
						<td th:text="${m['nickname']}"></td>
						<td th:text="${m['email']}"></td>
						<td th:text="${m['address']}" class="addr" th:title="${m['address']}"></td>
						<td th:text="${m['point']}"></td>
					</tr>
				</tbody>
			</table>
		</div>
		<th:block id="page-scripts"></th:block>
	</section>
</body>

</html>